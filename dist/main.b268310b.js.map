{"version":3,"sources":["main.js"],"names":["$siteList","$","$lastLi","find","mySites","localStorage","getItem","initSites","JSON","parse","hashMap","url","logo","simplify","str","replace","render","remove","forEach","obj","i","$li","insertBefore","on","window","open","e","stopPropagation","splice","prompt","indexOf","console","log","push","toUpperCase","scrollTo","onbeforeunload","setItem","stringify"],"mappings":"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","file":"main.b268310b.js","sourceRoot":"../src","sourcesContent":["const $siteList = $('.siteList')\nconst $lastLi = $siteList.find('li.last')\n\n// 存储数据\nconst mySites = localStorage.getItem('mySites')\nconst initSites = JSON.parse(mySites)\nconst hashMap = initSites || [\n  {\n    url: 'https://ncov.dxy.cn/ncovh5/view/pneumonia?scene=2&clicktime=1579582238&enterid=1579582238&from=groupmessage&isappinstalled=0',\n    logo: '丁'\n  },\n  {\n    url: 'http://www.people.com.cn/',\n    logo: '人'\n  },\n  {\n    url: 'http://www.bilibili.com/',\n    logo: 'B'\n  }\n]\n\n// 正则\nconst simplify = (str) => {\n  return str.replace('https://', '')\n      .replace('http://', '')\n      .replace('www.', '')\n      .replace(/(\\/.*)|(^\\.)/, '') // 删除 / 开头和开头是 . 的内容\n      .replace(/\\.?(?<=\\.).*$/, '') // 删除域名第一个 . 之后的内容\n}\n\n// 渲染\nconst render = () => {\n  $siteList.find('li:not(.last)').remove()\n  hashMap.forEach((obj, i) => {\n    const $li = $(`<li class=\"site\" title=\"${obj.url}\">\n        <div class=\"logo\">${obj.logo}</div>\n        <div class=\"link\">${simplify(obj.url)}</div>\n        <div class=\"icon-wrapper\">\n          <svg class=\"icon close\">\n            <use xlink:href=\"#icon-close\"></use>\n          </svg>\n        </div>\n      </li>`)\n    $li.insertBefore($lastLi)\n    $li.on('click', () => {\n      window.open(obj.url)\n    })\n    $li.on('click', '.close', (e) => {\n      e.stopPropagation() // 阻止冒泡\n      hashMap.splice(i,1)\n      render()\n    })\n  })\n}\nrender()\n\n// 新增网页\n$('.site.last').on('click', () => {\n  let url = window.prompt('请输入网址')\n  if (url.indexOf('https://') === -1) {\n    url = `https://${url}`\n  }\n  console.log(url)\n  console.log(hashMap)\n  hashMap.push({\n    url: url,\n    logo: simplify(url)[0].toUpperCase()\n  })\n  // console.log(hashMap)\n  render()\n  window.scrollTo(0, 99999)\n})\n\n// 保存\nwindow.onbeforeunload = () => {\n  localStorage.setItem('mySites', JSON.stringify(hashMap))\n}"]}